{% extends '_layout.html' %}

{% block body %}

    
<div style="float:right">
    <form action="/post/{{ post.post_id }}/delete" method = 'POST' style = "display:inline-block; ">
        <button type="submit" class="btn btn-danger" style="font-size:70%">Delete</button>
    </form>
    <form action="/post/{{ post.post_id }}/edit" method = 'GET' style = "display:inline-block">
        <button type="submit" class="btn btn-outline-primary" style="font-size:70%;">Edit</button>
    </form>
</div>

    <div class="row align-items-center" style="height:500px">
        <div class="col">
            <video width="500" height="500" controls poster='{{ post.song_image }}' >
                <source src="{{ post.song_link }}" type= 'audio/mp3' style="background-color: black">
            </video>
            <h5>{{ post.song_name }} by {{ post.song_artists }}</h5>

        </div>
        <div class="col" style="background-color:rgba(33, 33, 33, 0.856); height:450px;">

            <h3>{{ post.title }} - {{ postuser.user_name }}</h3>
            {% if post.user_id == user_in_session %}
            
            {% endif %}
            <h5>{{ post.caption }}</h5>
            
        </div>
    </div>

    
    
    
    
<!-- comment stuff -->
</div>
<form action="/comment" method="POST">
    <div class="mb-3">
        <label for="commentbox" class="form-label">Comments:</label>
        <textarea class="form-control" id="commentbox" rows="2" name="comment"></textarea>
    </div>
    <input type="hidden" id="postId" name="postId" value="{{ post.post_id }}">
    <input type="submit">
</form>
<br>
{% if comments is not none %}
    {% for comment in comments %}
        <div style = "outline: 2px solid purple;">
            <p style = "display:inline-block">{{ usernames[loop.index-1].user_name }} </p>
            {% if comment.user_id == user_in_session %}
            <form style = "display:inline-block" action = "/comment/{{ comment.comment_id }}/edit" method = 'GET'>
                <a href='#' class="link-primary" onclick="this.parentNode.submit()">edit</a>
            </form>
            <form style = "display:inline-block" action = "/comment/{{ comment.comment_id }}/delete" method = 'POST'>
                <a href='#' class="link-danger" onclick="this.parentNode.submit()">delete</a>
            </form>
            {% endif %}   
            <p>{{ comment.content }}</p>
        </div>
        


    {% endfor %}
{% endif %}

{% endblock %}